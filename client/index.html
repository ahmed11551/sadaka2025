<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no" />

    <meta property="og:title" content="MubarakWay | Садака-Пасс" />
    <meta property="og:description" content="Ваш надежный инструмент для садака, закята и поддержки благотворительных проектов." />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="MubarakWay | Садака-Пасс" />
    <meta name="twitter:description" content="Ваш надежный инструмент для садака, закята и поддержки благотворительных проектов." />

    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap" rel="stylesheet">
    
    <!-- Telegram WebApp Script -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- Early error suppression - must run before any other scripts -->
    <script>
      (function() {
        // List of endpoints that are expected to return 404 (not implemented in API)
        const EXPECTED_404_PATTERNS = [
          '/api/auth/me',
          '/api/auth/profile',
          '/api/partners',
          '/api/campaigns',
          '/api/subscriptions',
          '/api/subscriptions/checkout',
          '/api/history',
          '/api/reports',
          '/api/favorites',
          '/api/comments',
          '/api/donations',
          '/api/rating/',
        ];
        
        function shouldSuppressError(message) {
          if (!message) return false;
          const lowerMessage = String(message).toLowerCase();
          const has404 = lowerMessage.includes('404') || lowerMessage.includes('not found');
          if (!has404) return false;
          return EXPECTED_404_PATTERNS.some(pattern => lowerMessage.includes(pattern.toLowerCase()));
        }
        
        // Override console.error as early as possible
        const originalConsoleError = console.error;
        console.error = function(...args) {
          const errorString = args.join(' ');
          if (shouldSuppressError(errorString)) {
            return; // Suppress expected 404 errors
          }
          originalConsoleError.apply(console, args);
        };
        
        // Override console.warn
        const originalConsoleWarn = console.warn;
        console.warn = function(...args) {
          const warnString = args.join(' ');
          if (shouldSuppressError(warnString)) {
            return;
          }
          originalConsoleWarn.apply(console, args);
        };
        
        // Suppress browser extension errors (Google Translate, etc.)
        const originalError = window.onerror;
        window.onerror = function(message, source, lineno, colno, error) {
          // Suppress Content Security Policy errors from browser extensions
          if (message && typeof message === 'string' && (
            message.includes('Content Security Policy') ||
            message.includes('translate_http') ||
            message.includes('chrome-extension://') ||
            message.includes('Could not establish connection')
          )) {
            return true; // Suppress error
          }
          // Call original error handler if exists
          if (originalError) {
            return originalError(message, source, lineno, colno, error);
          }
          return false;
        };
        
        // Suppress unhandled promise rejections from extensions
        window.addEventListener('unhandledrejection', function(event) {
          const reason = event.reason;
          if (reason && typeof reason === 'object' && reason.message) {
            const message = String(reason.message);
            if (
              message.includes('Could not establish connection') ||
              message.includes('Receiving end does not exist') ||
              message.includes('chrome-extension://')
            ) {
              event.preventDefault(); // Suppress error
              return;
            }
          }
        });
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
