# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º –∏ —á—Ç–æ —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ / —á—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å

## ‚úÖ –ß–¢–û –£–ñ–ï –ò–°–ü–†–ê–í–õ–ï–ù–û:

1. **vercel.json —Å—É—â–µ—Å—Ç–≤—É–µ—Ç** - ‚úì –ï—Å—Ç—å —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ rewrites –¥–ª—è SPA
2. **SPA fallback** - ‚úì Rewrites –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. **Error boundaries** - ‚úì –î–æ–±–∞–≤–ª–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
4. **Build –∫–æ–º–∞–Ω–¥–∞** - ‚úì –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –≤ vercel.json
5. **Output directory** - ‚úì –ù–∞—Å—Ç—Ä–æ–µ–Ω (dist/public)
6. **–í–ª–æ–∂–µ–Ω–Ω—ã–π Switch** - ‚úì –ò–°–ü–†–ê–í–õ–ï–ù–û - —É–¥–∞–ª–µ–Ω, –≤—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã –Ω–∞ –æ–¥–Ω–æ–º —É—Ä–æ–≤–Ω–µ
7. **–ü–æ—Ä—è–¥–æ–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤** - ‚úì –ò–°–ü–†–ê–í–õ–ï–ù–û - —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–µ—Ä–≤—ã–º–∏, "/" –ø–æ—Å–ª–µ–¥–Ω–∏–º

## ‚ö†Ô∏è –ß–¢–û –ù–£–ñ–ù–û –ò–°–ü–†–ê–í–ò–¢–¨ (–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã):

### 1. –ü—Ä–æ–∫—Å–∏ API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Vercel ‚ùå
**–ü—Ä–æ–±–ª–µ–º–∞**: 
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ `/api/external/*` –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- –ù–∞ Vercel –Ω–µ—Ç –±—ç–∫–µ–Ω–¥–∞, –ø–æ—ç—Ç–æ–º—É `/api/external` –≤–µ—Ä–Ω–µ—Ç 404
- API –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –ø–∞–¥–∞—Ç—å —Å –æ—à–∏–±–∫–∞–º–∏ CORS –∏–ª–∏ 404

**–¢–µ–∫—É—â–∏–π –∫–æ–¥** (`client/src/lib/api.ts`):
```typescript
const API_BASE_URL = typeof window !== 'undefined' 
  ? (import.meta.env.VITE_API_BASE_URL || '/api/external')  // ‚ùå –ü—Ä–æ–±–ª–µ–º–∞!
  : 'https://bot.e-replika.ru/api/v1';
```

**–†–µ—à–µ–Ω–∏–µ**:
- –í–∞—Ä–∏–∞–Ω—Ç A: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ API (–µ—Å–ª–∏ CORS —Ä–∞–∑—Ä–µ—à–µ–Ω)
- –í–∞—Ä–∏–∞–Ω—Ç B: –°–æ–∑–¥–∞—Ç—å Vercel Edge Function –¥–ª—è –ø—Ä–æ–∫—Å–∏
- –í–∞—Ä–∏–∞–Ω—Ç C: –ò–∑–º–µ–Ω–∏—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ –ø—Ä—è–º–æ–π API URL

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–µ —É–∫–∞–∑–∞–Ω—ã ‚ùå
**–ü—Ä–æ–±–ª–µ–º–∞**: 
- –í `vercel.json` –Ω–µ—Ç —É–∫–∞–∑–∞–Ω–∏—è –Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –≤—Ä—É—á–Ω—É—é –¥–æ–±–∞–≤–ª—è—Ç—å –∏—Ö –≤ Vercel Dashboard
- –ï—Å–ª–∏ –Ω–µ –¥–æ–±–∞–≤–∏—Ç—å - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

**–†–µ—à–µ–Ω–∏–µ**: 
- –î–æ–±–∞–≤–∏—Ç—å –≤ `vercel.json` —Å–µ–∫—Ü–∏—é —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏–ª–∏
- –£–ª—É—á—à–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `DEPLOY_VERCEL.md`

### 3. base: "./" –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã ‚ö†Ô∏è
**–ü—Ä–æ–±–ª–µ–º–∞**: 
- `base: "./"` –≤ `client/vite.config.ts` —Å–æ–∑–¥–∞–µ—Ç –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏
- –ù–∞ Vercel —ç—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –∞—Å—Å–µ—Ç–æ–≤

**–†–µ—à–µ–Ω–∏–µ**: 
- –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞ `base: "/"` –¥–ª—è Vercel

### 4. –ü—É—Ç–∏ –∫ –∞—Å—Å–µ—Ç–∞–º @assets ‚ö†Ô∏è
**–ü—Ä–æ–±–ª–µ–º–∞**: 
- –ê—Å—Å–µ—Ç—ã –≤ `attached_assets/` –º–æ–≥—É—Ç –Ω–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏ —Å–±–æ—Ä–∫–µ
- –ò–º–ø–æ—Ä—Ç—ã `@assets/*` –º–æ–≥—É—Ç —Å–ª–æ–º–∞—Ç—å—Å—è –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏

**–†–µ—à–µ–Ω–∏–µ**: 
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∞—Å—Å–µ—Ç—ã –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ `dist/public` –ø—Ä–∏ —Å–±–æ—Ä–∫–µ
- –ò–ª–∏ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ `client/public/`

### 5. –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ API ‚ö†Ô∏è
**–ü—Ä–æ–±–ª–µ–º–∞**: 
- –ï—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å –±–µ–ª—ã–π —ç–∫—Ä–∞–Ω
- –ù—É–∂–Ω–∞ fallback –ª–æ–≥–∏–∫–∞

**–†–µ—à–µ–Ω–∏–µ**: 
- ‚úÖ –£–∂–µ –µ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∞ 404 –≤ api.ts (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ)
- ‚úÖ ErrorBoundary –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

## üìù –ù–ï –ö–†–ò–¢–ò–ß–ù–û (–Ω–æ —Å—Ç–æ–∏—Ç —É–ª—É—á—à–∏—Ç—å):

1. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –ï—Å—Ç—å `DEPLOY_VERCEL.md`, –Ω–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å
2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞** - `test_token_123` –≤ –∫–æ–¥–µ, –Ω–æ —ç—Ç–æ —Ç–µ—Å—Ç–æ–≤—ã–π —Ç–æ–∫–µ–Ω
3. **Lazy loading** - –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è MVP
4. **Prisma –Ω–∞ Vercel** - –ù–µ –Ω—É–∂–µ–Ω, —Ç.–∫. –±—ç–∫–µ–Ω–¥ –æ—Ç–¥–µ–ª—å–Ω–æ

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô:

1. **–ö–†–ò–¢–ò–ß–ù–û**: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–∫—Å–∏ API - —Å–¥–µ–ª–∞—Ç—å –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∏–ª–∏ Edge Function
2. **–ö–†–ò–¢–ò–ß–ù–û**: –£–ª—É—á—à–∏—Ç—å base path –≤ vite.config.ts
3. **–í–ê–ñ–ù–û**: –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º
4. **–í–ê–ñ–ù–û**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Å—Å–µ—Ç–æ–≤

